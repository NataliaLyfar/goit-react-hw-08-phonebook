{"version":3,"file":"static/js/39.32f14185.chunk.js","mappings":"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","sources":["firebase/firebase.js","pages/ProfilePage/index.jsx"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getStorage } from 'firebase/storage';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBGW_j0LEud3iyjGJevWLt4TetIscAWlyY\",\n  authDomain: \"phonebook-381ff.firebaseapp.com\",\n  projectId: \"phonebook-381ff\",\n  storageBucket: \"phonebook-381ff.appspot.com\",\n  messagingSenderId: \"474948812701\",\n  appId: \"1:474948812701:web:8e56c64208b5d5883ff974\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const storage = getStorage(app);","import { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { authSelectors, authOperations } from \"redux/auth\";\nimport { Title, List, Box, TertiaryButton, SecondaryButton } from \"components/ui\";\nimport { BsFillArrowLeftCircleFill } from \"react-icons/bs\";\nimport { storage } from \"../../firebase/firebase\";\nimport { ref, uploadBytes, listAll, getDownloadURL } from 'firebase/storage';\nimport { nanoid } from 'nanoid';\nimport { toast } from \"react-toastify\";\nimport { breakpoints } from \"styleConfig/breakpoints\";\nimport styled from \"styled-components\";\nimport noAvatar from 'assets/noAvatar.jpg';\nimport addPhoto from 'assets/addPhoto.jpg';\nimport BackPic from 'assets/profileBack.jpg';\n\n\n\nconst ProfilePage = () => {\n  const [imageUpload, setImageUpload] = useState(null);\n  const [imageList, setImageList] = useState([]);\n  const userName = useSelector(authSelectors.getUserName);\n  const userEmail = useSelector(authSelectors.getUserEmail);\n  const token = useSelector(authSelectors.getToken);\n  const [backLocation, setBackLocation] = useState(null);\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {   \n    const imageListRef = ref(storage, `${token}/images/`); \n    listAll(imageListRef).then((response) => {\n      response.items.forEach(item => {getDownloadURL(item).then(url => {\n        setImageList(prev => [url, ...prev]);\n        });\n      });\n    });\n  },[token]);\n\n  useEffect(() => {\n    if (backLocation === null) {\n      setBackLocation(location?.state?.from ?? '/');\n    };\n  }, [backLocation, location?.state?.from]);\n\n  const onGoBack = () => {\n    navigate(backLocation);\n};\n\nuseEffect(()=> {\n  if(!imageUpload) return;\n  const imageRef = ref(storage, `${token}/images/${imageUpload.name + nanoid()}`);\n  uploadBytes(imageRef, imageUpload).then((snapshot) => {\n    toast.info('Image Uploaded');\n    getDownloadURL(snapshot.ref).then((url) => {\n      setImageList(prev => [url, ...prev])\n    })\n  });\n}, [token, imageUpload]);\n\n  return (\n    <ProfileWrapper>\n      <Box>\n        <SecondaryButton onClick={onGoBack}><BsFillArrowLeftCircleFill/></SecondaryButton>\n        <Title>Personal Info</Title>\n        <AvatarWrapper>\n          {imageList.length > 0 ? (\n            <Avatar  src={imageList[0]} alt=\"avatar\" />\n            ) : (\n            <Avatar src={noAvatar} alt='noAvatar' />\n            )\n          }   \n          <UpLoad>\n            <AvatarInput type=\"file\" onChange={e => setImageUpload(e.target.files[0])}/>\n          </UpLoad>\n        </AvatarWrapper>\n        <List>\n            <Item><Label>Name</Label><Value>{userName}</Value></Item>\n            <Item><Label>Email</Label><Value>{userEmail}</Value></Item>\n        </List>\n        <TertiaryButton type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\n          Log out\n        </TertiaryButton>\n      </Box>\n    </ProfileWrapper>\n  );\n};\n\nconst ProfileWrapper = styled.div`\nheight: 100%;\nposition: relative;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\nmargin: 0 auto;\nbackground-color: white;\nbackground-image: url(${BackPic});\nbackground-position: center;\nbackground-repeat: no-repeat;\nbackground-size: contain;\n`;\nconst AvatarInput = styled.input`\nposition: absolute;\ntop: 0;\nright: 0;\ndisplay: block;\nwidth: 50px;\nheight: 50px;\nopacity: 0;\nz-index: 2;\n  &:hover{\n    cursor: pointer;\n  };\n`;\nconst Avatar = styled.img`\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nwidth: 150px;\nheight: 190px;\nborder-radius: ${p => p.theme.radii.normal};\nbackground-color: transparent;\n  @media (${breakpoints.tablet}) {\n    width: 190px;\n    height: 230px;\n  };\n`;\nconst UpLoad = styled.div`\nz-index: 10;\nposition: absolute;\nbottom: -10px;\nright: -10px;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nwidth: 50px;\nheight: 50px;\nborder-radius: ${p => p.theme.radii.round};\nborder: none;\nbackground-color: transparent;\nbackground-image: url(${addPhoto});\nbackground-position: center;\nbackground-repeat: no-repeat;\nbackground-size: contain;\n`;\nconst AvatarWrapper = styled.div`\nposition: relative;\nmargin: ${p => p.theme.space[3]}px 0;\n`;\nconst Item =styled.li`\ndisplay: flex;\nflex-direction: column;\n`;\nconst Label = styled.span`\nmargin-bottom: ${p => p.theme.space[0]}px;\npadding-left: ${p => p.theme.space[2]}px;\nfont-size: ${p => p.theme.fontSizes.s};\nfont-weight: ${p => p.theme.fontWeights.semibold};\ncolor: ${p => p.theme.colors.primary};\n`;\nconst Value = styled.span`\nmargin-bottom: ${p => p.theme.space[0]}px;\npadding-left: ${p => p.theme.space[2]}px;\nfont-size: ${p => p.theme.fontSizes.l};\nfont-weight: ${p => p.theme.fontWeights.semibold};\n`;\n\nexport default ProfilePage;"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","storage","getStorage","ProfileWrapper","styled","BackPic","AvatarInput","Avatar","p","theme","radii","normal","breakpoints","UpLoad","round","addPhoto","AvatarWrapper","space","Item","Label","fontSizes","s","fontWeights","semibold","colors","primary","Value","l","useState","imageUpload","setImageUpload","imageList","setImageList","userName","useSelector","authSelectors","userEmail","token","backLocation","setBackLocation","dispatch","useDispatch","location","useLocation","navigate","useNavigate","useEffect","imageListRef","ref","listAll","then","response","items","forEach","item","getDownloadURL","url","prev","state","from","imageRef","name","nanoid","uploadBytes","snapshot","toast","onClick","length","src","alt","noAvatar","type","onChange","e","target","files","authOperations"],"sourceRoot":""}